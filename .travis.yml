language: ruby
script: bundle exec middleman build
cache: bundler
rvm:
  - 2.6.2
env:
  global:
    - AWS_REGION=ap-northeast-1
    - AWS_DEFAULT_REGION=ap-northeast-1
    - secure: "GaolAUa4mLUuji9ONkTeKASfECmCNSH3jf6eMbV8TwZY7CJJUk6FlLwbQ/3pplFdPG+e4L2i3FhmxNw7weTYNKHvRacdQL3J7zV332mH4cFcquv/ZuhhEdqJLPy+yPyock1HeGEtYOYzOkLX/Uvfl5J1C8Tx8fVxwHJ2ni4XHuNn4mTXTCBDUaa4Zewpz73OJINbvmVRM9pjPnoUkmsYlH34O4n1wj95DG3EMzTORX+UTCdg3wr6CYlxf512FSq0o6fGeRNovR180c1fulIzzLj/k6Z/Y+6ZChgAQVKSwrC9hHF7S+R3C5IqGZ/ikEg3Qs4uL1RTeHgofsj8qeD4p4UUymIfISQfI7VHmROQFQX++gkp5a2gNHNRhI9pP/Uo1UL2kkKLDAw7gAYpzoxF7Be0oJbJw2iUiR3qBCYZ0RlrYG2bNgxn30JTlY18d+vxlonsswHy1w2wNXeP40VS95EobuZ4yIfowb65/nj4JiNtyIwaJz4NF1OjDDJj1X4LcgFaTJ5HmCP0RYc7/oturFDAuwL1MmehSZNkJo8S+oyIwUH944iDnOfYgfOGz+OsVMjnP0ffTna/gvDHmgUlN3bQeUUsy4WLlNtPu/MzuVCrQJMY+FnjxJAmugNNWzLZiOE8lfC7utzEexLBG/mHYQ0ElcAWCGmDLIqjD+sCa2M="
    - secure: "eO2+yz9eskhzkFU4l6Fs9tPCljPjEY5xEq1cYCWsDrbwXrFMCuW8oGrDStfeZbja6MC7Geai2N0rLdh7HqWMejidkebYSl75GyamSZARWUyVmbaWFznns8e8EcyeeEcnYkFHBajdxM2f3u8gDQrpw6penHj5kS2RSg4sTAsxBwjOnEGk1mXmZes/Rble3jUj6pe4WYfn3tuqtmSACeUuqkuQN0VpZ/0X49Ncc8OpmgN3GkYZ3crGoVc7ho/W03h2JmWPD1nES4HEwpcWkJJdQ2o6IegLZjOWoWua3lMGFvXQQqlcH9wDWC5VOI0sMsZue0H1kCfnGG45mRv6beNmyIsVv+IV4R/FpwLjNt/HlelLwLcD0Rt3GmlZMzSRHxN58RrQNgj0+4oOYSqgSBl0PKOCU9RPNjLrGBtlbdhLUyOt/ar9KcciCbCzszQsUtvFb6lriCCDpaFxCai0t0C+NFMh2cZetHbYzZB8F3/p6qUuS1sFZHIidbFEWTk13StwtpV7TMixwZDrd/iD3lGRXj/fN2A0ZQWYPrevMwjkEp29WvYtZpBwEtmmvvBBG7GRVNuTZA3eRc5aXCTDf7gFTr81atb0tCUqBzgqdOLWDQkdZcZyIr7zOWY124PqEDc0gtU0VCz6l/8H/7I/SGlzYwinlRHP0MVh0xUrPRx5GTg="
before_install:
  - pip install --user awscli
deploy:
  provider: script
  skip_cleanup: true
  script:
    - "aws s3 sync build s3://ayemos.me/ --delete"
  on:
    branch: master
